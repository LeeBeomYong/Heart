<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.heartpet.action.UserDAO">
	
	<select id="id_check" parameterType="String" resultType="int">
		SELECT COUNT(USER_ID) FROM HEARTPET_USER WHERE USER_ID = #{id}
	</select>
	
	<insert id="kakao_insert" parameterType="map">
		<selectKey resultType="int" keyProperty="user_no" order="BEFORE">select max(user_no) from heartpet_user</selectKey> 
		INSERT INTO HEARTPET_USER VALUES (#{user_no}+1, #{id}, 'kakao1234', #{name}, default, '', '', '', '', default, '' )
	</insert>
	
	<select id="login" parameterType="String" resultType="String">
		SELECT USER_PWD FROM HEARTPET_USER WHERE USER_ID = #{id} and USER_GRADE NOT IN (5)
	</select>
	
	<select id="userInfo" parameterType="String" resultType="com.heartpet.model.UserDTO">
		SELECT * FROM HEARTPET_USER WHERE USER_ID = #{id}
	</select>
	
	<insert id="join" parameterType="map">
		<selectKey resultType="int" keyProperty="user_no" order="BEFORE">select max(user_no) from heartpet_user</selectKey>
		INSERT INTO HEARTPET_USER VALUES(#{user_no}+1, #{user_id}, #{user_pwd}, #{user_name}, #{user_grade}, #{user_email}, #{user_phone}, #{addr}, '', 0, #{user_dogexp})
	</insert>
	
</mapper>